<!DOCTYPE html>
<html>
<head>
    <title>User Dashboard</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}?v=1.3">
</head>
<body class="dashboard-page">
  <div class="nav">
    <a href="{{ url_for('profile') }}" style="color: var(--text); margin-right: 15px;">My Profile</a>
    <span class="pill">Secure Session</span>
</div>
    <div class="container">
        <div class="card">
            <h1>Welcome, {{ name }}</h1>
            <span class="sub">Account Security Dashboard</span>

            <p><strong>Email:</strong> {{ session['user_email'] }}</p>

            <div class="table-container">
                <table>
                    <thead>
                        <tr><th>Event</th><th>IP</th><th>Time</th></tr>
                    </thead>
                    <tbody>
                        {% for log in logs %}
                        <tr>
                            <td>{{ log.event }}</td>
                            <td>{{ log.ip }}</td>
                            <td>{{ log.created_at }}</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>

            <div style="margin-top: 20px; text-align: center;">
                <a href="/logout" style="color: var(--red); text-decoration: none; font-weight: 600;">Logout from Portal</a>
            </div>
        </div>
    </div>
    <script>
    // 1. Typing Effect for the Header
    const header = document.querySelector('h1');
    const text = header.innerText;
    header.innerText = '';
    let i = 0;

    function typeWriter() {
        if (i < text.length) {
            header.innerHTML += text.charAt(i);
            i++;
            setTimeout(typeWriter, 50); // Speed of typing
        }
    }
    typeWriter();

    // 2. Auto-Fade for Flash Messages
    setTimeout(function() {
        let alerts = document.querySelectorAll('.flash-message');
        alerts.forEach(alert => {
            alert.style.transition = "opacity 0.8s ease, transform 0.8s ease";
            alert.style.opacity = "0";
            alert.style.transform = "translateY(-10px)";
            setTimeout(() => alert.remove(), 800);
        });
    }, 3000);
</script>
</body>