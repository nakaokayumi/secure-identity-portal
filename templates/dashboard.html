<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Dashboard | Secure Portal</title>
    <link rel="stylesheet" href="/static/style.css">
</head>
<body class="dashboard-page">
    <div class="nav">
        <a href="{{ url_for('dashboard') }}">Project Home</a>
        <span class="pill">Secure Session</span>
    </div>

    <div class="container">
        <div class="box">
            <div class="card">
                <div id="welcome-text" style="margin-bottom:20px; color:#00ff41; font-family:Consolas, monospace;">
                  ACCESS GRANTED — Welcome, {{ name | upper }}
                </div>
                <span class="sub">Account Security Dashboard</span>

                <p style="margin-bottom: 20px;"><strong>Email:</strong> {{ email }}</p>
                <div class="user-panel">
                    <h3>PROFILE DATA</h3>
                
                    <p><strong>Name:</strong> {{ name }}</p>
                    <p><strong>Last Login:</strong> {{ last_login }}</p>
                    <p><strong>Member Since:</strong> {{ member_since }}</p>
                </div>

                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>Event</th>
                                <th>IP Address</th>
                                <th>Timestamp</th>
                            </tr>
                        </thead>
                        <tbody>
                          {% if logs and logs|length > 0 %}
                            {% for row in logs %}
                              <tr>
                                <td>{{ row["event"] }}</td>
                                <td>{{ row["ip"] }}</td>
                                <td>{{ row["created_at"] }}</td>
                              </tr>
                            {% endfor %}
                          {% else %}
                            <tr>
                              <td colspan="3">No recent activity.</td>
                            </tr>
                          {% endif %}
                        </tbody>
                    </table>
                </div>
                <div class="security-insights" style="margin-top: 30px; text-align: left; background: rgba(0, 255, 65, 0.03); border: 1px solid #333; padding: 20px; border-radius: 8px;">
                    <h3 style="color: var(--terminal-green); font-family: 'JetBrains Mono', monospace; font-size: 1rem; margin-bottom: 15px;">
                        <i class="fas fa-shield-alt"></i> SYSTEM_SECURITY_OVERVIEW
                    </h3>
                    
                    <div style="display: grid; gap: 15px; font-size: 0.85rem; line-height: 1.5; color: #ccc;">
                        <div>
                            <strong style="color: white;">1. Brute-Force Mitigation:</strong>
                            <p style="margin: 5px 0;">Implemented a <code>failedAttempts</code> counter with a hardware-level lockout. After 3 invalid entries, the <code>startLockout()</code> function triggers a 30-second <code>setInterval</code> cooldown, preventing automated dictionary attacks.</p>
                        </div>
                        
                        <div>
                            <strong style="color: white;">2. High-Entropy Passphrases:</strong>
                            <p style="margin: 5px 0;">The system utilizes a 31-character passphrase. By using the "Random Word" method combined with mathematical constants (π), we achieve high entropy, making the password resistant to modern cracking clusters.</p>
                        </div>
                
                        <div>
                            <strong style="color: white;">3. Client-Side Sanitization:</strong>
                            <p style="margin: 5px 0;">All inputs are normalized using <code>.toLowerCase()</code> and handled via <code>e.preventDefault()</code> to ensure credentials are never leaked through URL parameters or browser history logs.</p>
                        </div>
                    </div>
                </div>
                <div style="margin-top: 20px; text-align: center; display: flex; flex-direction: column; gap: 15px;">
                    <a href="{{ url_for('game') }}" class="btn-primary" style="text-decoration: none; display: inline-block;">
                        INITIALIZE HANGMAN_PROTOCOL
                    </a>
                </div>
                <div style="margin-top: 30px; text-align: center;">
                    <a href="{{ url_for('login') }}" class="footer-links" style="color: var(--red); text-decoration: none; font-weight: 700; text-transform: uppercase; letter-spacing: 2px; font-family: 'JetBrains Mono', monospace;">Logout from Portal</a>
                </div>
            </div>
        </div>
    </div>

    <script>
        const header = document.querySelector('h1');
        const text = header.innerText;
        header.innerText = '';
        let i = 0;
    
        function typeWriter() {
            if (i < text.length) {
                header.innerHTML += text.charAt(i);
                i++;
                setTimeout(typeWriter, 100);
            }
        }
        window.onload = typeWriter;
    </script>
</body>
</html>







